(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__(40),slicedToArray=__webpack_require__(62),react=__webpack_require__(0);function useDebounce(debounce,delay){var payload=debounce.payload,callback=debounce.callback,_debounce$initCall=debounce.initCall,initCall=void 0!==_debounce$initCall&&_debounce$initCall,timer=Object(react.useRef)(),_useReducer=Object(react.useReducer)((function(o,n){return Object(objectSpread2.a)({},o,{},n)}),{payload:payload,initCall:initCall}),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],setState=_useReducer2[1];Object(react.useEffect)((function(){return timer.current=setTimeout((function(){state.initCall&&function handleCall(data){"function"==typeof callback&&callback(data)}(state.payload)}),delay),function(){return timer.current&&clearTimeout(timer.current)}}),[state.payload,delay]),Object(react.useEffect)((function(){state.initCall||setState({initCall:!0})}),[state.payload]);return{payload:state.payload,setPayload:function setPayload(data){"string"==typeof data&&setState({payload:data}),"object"==typeof data&&setState({payload:Object(objectSpread2.a)({},state.payload,{},data)})}}}function useToggle(status){var _useState=Object(react.useState)(status),_useState2=Object(slicedToArray.a)(_useState,2),state=_useState2[0],setState=_useState2[1];return[state,function toggle(){return setState(!state)}]}__webpack_require__.d(__webpack_exports__,"a",(function(){return useDebounce})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useToggle}))},406:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);__webpack_require__(783);__webpack_exports__.a=function(storyFn){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{padding:20}},storyFn())}},417:function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator=__webpack_require__(119),regenerator_default=__webpack_require__.n(regenerator),slicedToArray=__webpack_require__(62),objectSpread2=__webpack_require__(40),objectWithoutProperties=__webpack_require__(189),react=__webpack_require__(0),useTable_formatQuery=function formatQuery(_ref){var pagination=_ref.pagination,sorter=_ref.sorter,filters=_ref.filters,other=Object(objectWithoutProperties.a)(_ref,["pagination","sorter","filters"]),query=Object(objectSpread2.a)({},filters,{},other);if(pagination){var current=pagination.current,pageSize=pagination.pageSize,total=pagination.total;query.current=current,query.pageSize=pageSize,query.total=total}return sorter&&sorter.field&&(query.orderBy=sorter.field,query.order="ascend"===sorter.order?"asc":"desc"),query};function useTable(tableConf){var request=tableConf.request,_tableConf$autoFirstF=tableConf.autoFirstFetch,autoFirstFetch=void 0===_tableConf$autoFirstF||_tableConf$autoFirstF,_tableConf$defaultPag=tableConf.defaultPageSize,defaultPageSize=void 0===_tableConf$defaultPag?10:_tableConf$defaultPag,_tableConf$defaultCur=tableConf.defaultCurrent,defaultCurrent=void 0===_tableConf$defaultCur?1:_tableConf$defaultCur,_tableConf$pagination=tableConf.paginationOptions,paginationOptions=void 0===_tableConf$pagination?{}:_tableConf$pagination,_useReducer=Object(react.useReducer)((function(o,n){return Object(objectSpread2.a)({},o,{},n)}),{dataSource:[],pagination:{pageSize:defaultPageSize,current:defaultCurrent},loading:!1}),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],setState=_useReducer2[1],requestData=function requestData(params){var _len,args,_key,result,_args=arguments;return regenerator_default.a.async((function requestData$(_context){for(;;)switch(_context.prev=_context.next){case 0:for(setState({loading:!0}),_len=_args.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=_args[_key];return _context.next=4,regenerator_default.a.awrap(request.apply(void 0,[useTable_formatQuery(params)].concat(args)));case 4:result=_context.sent,setState(Object(objectSpread2.a)({},result,{loading:!1}));case 6:case"end":return _context.stop()}}))};Object(react.useEffect)((function(){autoFirstFetch&&requestData(state.pagination)}),[]);return{tableProps:{pagination:Object(objectSpread2.a)({pageSize:state.pagination.pageSize,current:state.pagination.current,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20","50"],defaultPageSize:defaultPageSize,defaultCurrent:defaultCurrent,total:state.pagination.total},paginationOptions),loading:state.loading,dataSource:state.dataSource,onChange:function onChange(pagination,filters,sorter){var mergeParams={pagination:pagination,filters:filters,sorter:sorter};setState(Object(objectSpread2.a)({},state,{pagination:Object(objectSpread2.a)({},state.pagination,{},pagination,{},filters,{},sorter)})),requestData(Object(objectSpread2.a)({},state.pagination,{},mergeParams))}},tableFetch:function tableFetch(params){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];requestData.apply(void 0,[Object(objectSpread2.a)({pagination:state.pagination},params)].concat(args))}}}__webpack_require__.d(__webpack_exports__,"a",(function(){return useTable}))},420:function(module,exports,__webpack_require__){__webpack_require__(421),__webpack_require__(580),module.exports=__webpack_require__(581)},481:function(module,exports){},581:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(582);var _storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(87);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.configure)(__webpack_require__(778),module)}.call(this,__webpack_require__(159)(module))},778:function(module,exports,__webpack_require__){var map={"./antd/useTable.story.tsx":779,"./hooks/useDebounce.story.tsx":878,"./hooks/useToggle.story.tsx":879};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=778},779:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){for(var _Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(119),_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40),_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(189),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(87),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(883),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(882),_l8n_antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(417),_layout_AntdDecorator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(406),withSourceLoader=__webpack_require__(246).withSource,__STORY__="import React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { Table, Input } from 'antd';\nimport { useTable } from '@l8n/antd';\nimport AntdDecorator from '../layout/AntdDecorator';\n\nconst randomStr = () => Math.random().toString(36).substring(2);\n\nconst testData: object[] = [];\nfor (let i = 0; i < 200; i++) {\n  testData.push({ pid: randomStr(), other: 'xxx' });\n}\n\nstoriesOf('Antd|useTable', module)\n  .addDecorator(AntdDecorator)\n  .add('Simple', () => {\n    const { tableProps, tableFetch } = useTable({\n      defaultPageSize: 5,\n      paginationOptions: {\n        showQuickJumper: false,\n        pageSizeOptions: ['5', '10', '15']\n      },\n      async request(params) {\n        const { current, pageSize, ...other } = params;\n\n        console.log(`query: ${JSON.stringify(params)}`);\n\n        const requestData: any = await new Promise((res, _rej) => {\n          setTimeout(() => {\n            res({\n              data: testData,\n              pageSize,\n              total: 200,\n              currentPage: current\n            });\n          }, 800);\n        });\n\n        // table props\n        return {\n          dataSource: requestData.data,\n          pagination: {\n            ...other,\n            pageSize: requestData.pageSize,\n            total: requestData.total,\n            current: requestData.currentPage\n          }\n        };\n      }\n    });\n    const handleSearch = (val: string) => {\n      tableFetch({\n        query: val\n      });\n    };\n    // console.log(tableProps, '---tableProps');\n    return (\n      <React.Fragment>\n        <h3>Mock Table</h3>\n        <Input.Search style={{ width: 200 }} onSearch={handleSearch} />\n        <Table\n          {...tableProps}\n          rowKey=\"pid\"\n          columns={[\n            { dataIndex: 'pid', title: 'PID' },\n            { dataIndex: 'other', title: 'Other' }\n          ]}\n        />\n      </React.Fragment>\n    );\n  });",__ADDS_MAP__={"antd-usetable--simple":{startLoc:{col:7,line:16},endLoc:{col:3,line:71},startBody:{col:17,line:16},endBody:{col:3,line:71}}},randomStr=function randomStr(){return Math.random().toString(36).substring(2)},testData=[],i=0;i<200;i++)testData.push({pid:randomStr(),other:"xxx"});Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("Antd|useTable",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/useTable.story.tsx",[],{},"/Users/zakj/github/nofwl/nx/stories/antd",{})).addDecorator(_layout_AntdDecorator__WEBPACK_IMPORTED_MODULE_8__.a).add("Simple",(function(){var _useTable=Object(_l8n_antd__WEBPACK_IMPORTED_MODULE_7__.a)({defaultPageSize:5,paginationOptions:{showQuickJumper:!1,pageSizeOptions:["5","10","15"]},request:function request(params){var current,pageSize,other,requestData;return _Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.async((function request$(_context){for(;;)switch(_context.prev=_context.next){case 0:return current=params.current,pageSize=params.pageSize,other=Object(_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__.a)(params,["current","pageSize"]),console.log("query: ".concat(JSON.stringify(params))),_context.next=4,_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.awrap(new Promise((function(res,_rej){setTimeout((function(){res({data:testData,pageSize:pageSize,total:200,currentPage:current})}),800)})));case 4:return requestData=_context.sent,_context.abrupt("return",{dataSource:requestData.data,pagination:Object(_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},other,{pageSize:requestData.pageSize,total:requestData.total,current:requestData.currentPage})});case 6:case"end":return _context.stop()}}))}}),tableProps=_useTable.tableProps,tableFetch=_useTable.tableFetch;return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("h3",null,"Mock Table"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__.a.Search,{style:{width:200},onSearch:function handleSearch(val){tableFetch({query:val})}}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,Object.assign({},tableProps,{rowKey:"pid",columns:[{dataIndex:"pid",title:"PID"},{dataIndex:"other",title:"Other"}]})))}))}.call(this,__webpack_require__(159)(module))},878:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87),_l8n_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(146),withSourceLoader=__webpack_require__(246).withSource,__STORY__="import React, { useState } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { useDebounce } from '@l8n/hooks';\n\nstoriesOf('Hooks|useDebounce', module)\n  .add('Simple', () => {\n    const [showQuery, setQuery] = useState();\n    const { payload, setPayload } = useDebounce({\n      initCall: true, // initial callback\n      payload: 'test', // initial value\n      callback(data) {\n        console.log('fetch api:', data);\n        setQuery(data);\n      },\n    }, 2000);\n    return (\n      <>\n        <input value={payload} type=\"text\" onChange={e => setPayload(e.target.value)} />\n        <p>query: {showQuery}</p>\n      </>\n    )\n  })\n  .add('Mulit Fields', () => {\n    const [showQuery, setQuery] = useState('');\n    const { payload, setPayload } = useDebounce({\n      // initCall: true,\n      payload: {\n        language: 'html',\n      },\n      callback(data) {\n        console.log('fetch api:', JSON.stringify(data));\n        setQuery(JSON.stringify(data));\n      },\n    }, 2000);\n    return (\n      <>\n        <select value={payload.language} onChange={e => setPayload({ language: e.target.value })}>\n          <option value=\"js\">JS</option>\n          <option value=\"html\">HTML</option>\n          <option value=\"css\">CSS</option>\n        </select>\n        <input type=\"text\" onChange={e => setPayload({ query: e.target.value })} />\n        <p>query: {showQuery}</p>\n      </>\n    )\n  });",__ADDS_MAP__={"hooks-usedebounce--mulit-fields":{startLoc:{col:7,line:23},endLoc:{col:3,line:46},startBody:{col:23,line:23},endBody:{col:3,line:46}},"hooks-usedebounce--simple":{startLoc:{col:7,line:6},endLoc:{col:3,line:22},startBody:{col:17,line:6},endBody:{col:3,line:22}}};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("Hooks|useDebounce",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/useDebounce.story.tsx",[],{},"/Users/zakj/github/nofwl/nx/stories/hooks",{})).add("Simple",(function(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(),_useState2=Object(_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),showQuery=_useState2[0],setQuery=_useState2[1],_useDebounce=Object(_l8n_hooks__WEBPACK_IMPORTED_MODULE_3__.a)({initCall:!0,payload:"test",callback:function callback(data){console.log("fetch api:",data),setQuery(data)}},2e3),payload=_useDebounce.payload,setPayload=_useDebounce.setPayload;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input",{value:payload,type:"text",onChange:function onChange(e){return setPayload(e.target.value)}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p",null,"query: ",showQuery))})).add("Mulit Fields",(function(){var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),_useState4=Object(_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState3,2),showQuery=_useState4[0],setQuery=_useState4[1],_useDebounce2=Object(_l8n_hooks__WEBPACK_IMPORTED_MODULE_3__.a)({payload:{language:"html"},callback:function callback(data){console.log("fetch api:",JSON.stringify(data)),setQuery(JSON.stringify(data))}},2e3),payload=_useDebounce2.payload,setPayload=_useDebounce2.setPayload;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select",{value:payload.language,onChange:function onChange(e){return setPayload({language:e.target.value})}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"js"},"JS"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"html"},"HTML"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"css"},"CSS")),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input",{type:"text",onChange:function onChange(e){return setPayload({query:e.target.value})}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p",null,"query: ",showQuery))}))}.call(this,__webpack_require__(159)(module))},879:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87),_l8n_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(146),withSourceLoader=__webpack_require__(246).withSource,__STORY__="import React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { useToggle } from '@l8n/hooks';\n\nstoriesOf('Hooks|useToggle', module)\n  .add('Simple', () => {\n    const [status, toggle] = useToggle(false);\n    return <button onClick={toggle}>toggle-{`${status}`}</button>\n  });",__ADDS_MAP__={"hooks-usetoggle--simple":{startLoc:{col:7,line:6},endLoc:{col:3,line:9},startBody:{col:17,line:6},endBody:{col:3,line:9}}};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("Hooks|useToggle",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/useToggle.story.tsx",[],{},"/Users/zakj/github/nofwl/nx/stories/hooks",{})).add("Simple",(function(){var _useToggle=Object(_l8n_hooks__WEBPACK_IMPORTED_MODULE_3__.b)(!1),_useToggle2=Object(_Users_zakj_github_nofwl_nx_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useToggle,2),status=_useToggle2[0],toggle=_useToggle2[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:toggle},"toggle-","".concat(status))}))}.call(this,__webpack_require__(159)(module))}},[[420,1,2]]]);
//# sourceMappingURL=main.57ed1eab0468a16c143e.bundle.js.map